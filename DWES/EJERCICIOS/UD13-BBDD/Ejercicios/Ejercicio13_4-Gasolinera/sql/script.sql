-- ELIMINA LA BASE DE DATOS EN CASO DE EXISTIR.
DROP DATABASE IF EXISTS GASOLINERA;

-- CREA LA BASE DE DATOS GASOLINERA.
CREATE DATABASE GASOLINERA;

-- UTILIZA LA BASE DE DATOS GASOLINERA.
USE GASOLINERA;

-- CREA UNA TABLA PARA LOS REPOSTAJES
CREATE TABLE REPOSTAJES(
    FECHA       DATE,
    HORA        VARCHAR(10),
    IMPORTE     FLOAT(6, 2),
    DNI         VARCHAR(10),
    MATRICULA   VARCHAR(10),
        CONSTRAINT PK_REPOSTAJES PRIMARY KEY(FECHA, HORA),
        CONSTRAINT CK_DNI_FORMAT CHECK (DNI REGEXP '^[0-9]{8}-[A-Z]$'),
        CONSTRAINT CK_MATRICULA_FORMAT CHECK (MATRICULA REGEXP '^[0-9]{4}-[A-Z]{3}$')
);

-- CREA UNA TABLA PARA LOS DEPÓSITOS
CREATE TABLE DEPOSITOS(
    ID              INT AUTO_INCREMENT,
    CANT_LITROS     FLOAT(6, 2),
    TIPO_GASOLINA   VARCHAR(20),
    IMPORTE         FLOAT(6, 2),
        CONSTRAINT PK_DEPOSITOS PRIMARY KEY (ID),
        CONSTRAINT CK_TIPO_GASOLINA
            CHECK (TIPO_GASOLINA IN ('Gasoil',
                                     'Gasolina 95',
                                     'Gasolina 98',
                                     'Gasoil agrícola'
                                    ))
);

-- INSERT DE INICIO EN REPOSTAJES
INSERT INTO REPOSTAJES (FECHA, HORA, IMPORTE)
    VALUES ('2023-11-01', '08:30:15', 25.50),
           ('2023-11-02', '12:45:00', 18.75),
           ('2023-11-03', '03:20:20', 30.00),
           ('2023-11-04', '10:00:10', 22.80);

INSERT INTO REPOSTAJES (FECHA, HORA, IMPORTE, DNI, MATRICULA)
    VALUES ('2023-11-01', '08:30:43', 25.50, '12345678-A', '1234-ABC'),
           ('2023-11-02', '12:45:56', 18.75, '98765432-B', '5678-DEF'),
           ('2023-11-03', '03:20:12', 30.00, '55566677-C', '9012-GHI'),
           ('2023-11-04', '10:00:20', 22.80, '44433322-D', '3456-JKL');

-- INSERTS DE INICIO EN DEPOSITOS
INSERT INTO DEPOSITOS (CANT_LITROS, TIPO_GASOLINA, IMPORTE)
    VALUES (100, 'Gasoil', 150.50),
           (50, 'Gasolina 95', 80.25),
           (75, 'Gasolina 98', 120.75),
           (200, 'Gasoil agrícola', 300.00);